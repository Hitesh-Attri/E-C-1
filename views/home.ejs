<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link href="/style/home.css" rel="stylesheet" />
    <!-- <link href="/css/main.css" rel="stylesheet"> -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
  </head>

  <body>
    <%- include('../views/partials/header', {username:username, loggedIn: loggedIn, isCart:true, isAdmin: isAdmin}); %>
    <main>
      <!-- <h3>this is home page. -- Products here =></h3> -->
      <!-- <a href="/logout"><button>LogOut1</button></a> -->
      <!-- <button onclick="location.href='/logout'">LogOut2</button> -->
      <!-- <div id="products-container">  -->

      <% if(!isAdmin){ %>
        <% let x=5; %> <% if( products.length < 5) x = products.length %>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <h2>Product-List</h2>
              <div class="row" id="parDiv">
                <% for(let i=0; i < x; i++){ %>
                  <% if(products[i].isAvailable){ %>
                    <div class="col-md-3">
                      <div class="product" style="background: #fff; height: 20rem;">
                        <div class="text-center" style="height: 13rem;">
                          <img src="<%= products[i].fileName %>" style="height: 100%; width: 80%;"/>
                        </div>
    
                        <p><%= products[i].productName %></p>
                        <div class="my-2 text center d-flex" id="<%= products[i].productId %>">
                          <a href="/product/details/<%= products[i].productId %>" class="btn btn-secondary btn-sm mx-2 viewDetails">View details</a>
                        
                          <button id="<%= products[i].productId %>" class="btn btn-secondary btn-sm addToCartBtn"  >Add to cart</button>
                        </div> 
                        
                      </div>
                      <br/>
                    </div>
                  <% } %>
                <% } %>
              </div>
            </div>
          </div>
        </div>
        <button style="margin-left: 3rem;" id="loadMoreBtn" class="btn btn-secondary">Load more</button>
        <br>

      <% } else{ %>
        <% let x=5; %> <% if( products.length < 5) x = products.length %>
        <div class="container">
          <div class="row">
            <div class="col-md-10">
              <h2>Product-List [A]</h2>
              <div class="row" id="parDiv">
                <% for(let i=0; i < x; i++){ %>
                  <% if(products[i].isAvailable){ %>
                    <div class="col-md-4" id="div<%= products[i].productId %>">
                      <div class="product" style="background: #fff; height: 25rem;">
                        <div class="text-center" style="height: 13rem;">
                          <img src="<%= products[i].fileName %>" style="height: 100%; width: 100%;"/>
                        </div>
                        <br>
    
                        <div class="my-3 text center d-flex" id="<%= products[i].productId %>">
    
                          <form id="<%= products[i].productId %>" method="POST" action="/" class="updateProduct" enctype="multipart/form-data">
                            <label for="productName">Product name:</label>
                            <input  type="text" name="productName" id="productName<%= products[i].productId %>" placeholder="Product Name" value="<%= products[i].productName %>" required /> <br/>
    
                            <label for="productName">Product Desc:</label>
                            <input type="text" name="productDesc" id="productDesc<%= products[i].productId %>" placeholder="Product Desc" value="<%= products[i].description %>" required /> <br/>
    
                            <label for="productName">Product Price:</label>
                            <input type="number" name="productPrice" id="productPrice<%= products[i].productId %>" placeholder="Product Price" value="<%= products[i].price %>" required /> <br/>
    
                            <label for="productQuantity">Product Quantity:</label>
                            <input type="number" name="productPrice" id="productQuantity<%= products[i].productId %>" placeholder="Product Quantity" value="<%= products[i].stock %>" required /> <br/>
    
                            <input type="submit" value="Update" class = "btn btn-sm btn-primary"/>
                            <button id="<%= products[i].productId %>" class="btn btn-danger btn-sm deleteProduct">Delete</button>
                          </form>
                        
                        </div> 
                        
                      </div>
                      <br/>
                    </div>
                  <% } %>
                <% } %>
              </div>
            </div>
          </div>
        </div>
        <button style="margin-left: 3rem;" id="loadMoreBtn" class="btn btn-secondary">Load more</button>
        <br>

      <% } %>

      <% if(!isAdmin){ %>
        <script src="/script/loadMoreScript.js"></script>
      <% }else{ %>
        <script src="/script/adminLoadMoreScript.js"></script>
      <% } %>

    </main>
  </body>
</html>
